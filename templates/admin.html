<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <title>Admin AI</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="bg-light">
    <div class="container py-4">
        <h3>Administrare conversații AI</h3>
        <table class="table">
            <thead>
                <tr>
                    <th>Întrebare</th>
                    <th>Răspuns</th>
                    <th>Acțiune</th>
                </tr>
            </thead>
            <tbody>
                {% for conv in conversatii %}
                <tr>
                    <td>{{ conv.intrebare }}</td>
                    <td>
                        <input type="text" id="raspuns{{conv.id}}" value="{{ conv.raspuns }}" class="form-control">
                    </td>
                    <td>
                        <button class="btn btn-success" onclick="actualizeaza({{conv.id}})">Actualizează</button>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <script>
        function actualizeaza(id){
            const raspuns = document.querySelector("#raspuns"+id).value;
            fetch('/update/' + id, {
                method: 'POST',
                headers: {'Content-Type':'application/x-www-form-urlencoded'},
                body: 'raspuns=' + encodeURIComponent(raspuns)
            })
            .then(response => response.json())
            .then(data => alert("Răspuns actualizat cu succes!"));
        }
    </script>
</body>
</html>
